var json = '[{    "cites_accepted":true,    "class_name":"Aves",    "family_name":"Accipitridae",    "full_name":"Accipiter brevipes",    "genus_name":"Accipiter",    "hash_ann_symbol":null,    "id":5324,    "kingdom_name":"Animalia",    "order_name":"Falconiformes",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Brevipes",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Levant Sparrowhawk"    ]  },  {    "cites_accepted":true,    "class_name":"Aves",    "family_name":"Accipitridae",    "full_name":"Accipiter gentilis",    "genus_name":"Accipiter",    "hash_ann_symbol":null,    "id":5170,    "kingdom_name":"Animalia",    "order_name":"Falconiformes",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Gentilis",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Goshawk",      "Northern Goshawk"    ]  },  {    "cites_accepted":false,    "class_name":"Actinopterygii",    "family_name":"Acipenseridae",    "full_name":"Acipenser sturio",    "genus_name":"Acipenser",    "hash_ann_symbol":null,    "id":8833,    "kingdom_name":"Animalia",    "order_name":"Acipenseriformes",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Sturio",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"I",    "english_names":[      "Atlantic Sturgeon",      "Baltic Sturgeon",      "Common Sturgeon",      "European Sturgeon",      "Sea Sturgeon",      "Sturgeon"    ]  },  {    "cites_accepted":false,    "class_name":"Mammalia",    "family_name":"Balaenopteridae",    "full_name":"Balaenoptera borealis",    "genus_name":"Balaenoptera",    "hash_ann_symbol":null,    "id":9834,    "kingdom_name":"Animalia",    "order_name":"Cetacea",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Borealis",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"I",    "english_names":[      "Coalfish Whale",      "Pollack Whale",      "Rudophis Rorqual",      "Sei Whale"    ]},  {    "cites_accepted":false,    "class_name":"Mammalia",    "family_name":"Balaenopteridae",    "full_name":"Balaenoptera physalus",    "genus_name":"Balaenoptera",    "hash_ann_symbol":null,    "id":6060,    "kingdom_name":"Animalia",    "order_name":"Cetacea",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Physalus",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"I",    "english_names":[      "Common Rorqual",      "Fin Whale",      "Fin-backed Whale",      "Finback",      "Finner",      "Herring Whale",      "Razorback"    ]  },  {    "cites_accepted":false,    "class_name":"Mammalia",    "family_name":"Canidae",    "full_name":"Canis lupus",    "genus_name":"Canis",    "hash_ann_symbol":null,    "id":7543,    "kingdom_name":"Animalia",    "order_name":"Carnivora",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Lupus",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"I/II",    "english_names":[      "Common Wolf",      "Grey Wolf",      "Timber Wolf",      "Wolf"    ]  },  {    "cites_accepted":true,    "class_name":"Reptilia",    "family_name":"Cheloniidae",    "full_name":"Caretta caretta",    "genus_name":"Caretta",    "hash_ann_symbol":null,    "id":11044,    "kingdom_name":"Animalia",    "order_name":"Testudines",    "phylum_name":"Chordata",    "rank_name":"class",    "$scope.class_name":"Caretta",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"I",    "english_names":[      "Loggerhead"    ]},{    "cites_accepted":false,    "class_name":null,    "family_name":"Ranunculaceae",    "full_name":"Adonis vernalis",    "genus_name":"Adonis",    "hash_ann_symbol":"#2",    "id":17521,    "kingdom_name":"Plantae",    "order_name":"Ranunculales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Vernalis",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Spring Adonis",      "Spring Pheasants-eye Adonis",      "Yellow Adonis"    ]},{    "cites_accepted":false,    "class_name":null,    "family_name":"Orchidaceae",    "full_name":"Anacamptis morio",    "genus_name":"Anacamptis",   "hash_ann_symbol":"#4",    "id":20658,    "kingdom_name":"Plantae",    "order_name":"Orchidales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Morio",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[]},{    "cites_accepted":false,    "class_name":null,    "family_name":"Orchidaceae",    "full_name":"Anacamptis pyramidalis",    "genus_name":"Anacamptis",    "hash_ann_symbol":"#4",    "id":15239,    "kingdom_name":"Plantae",    "order_name":"Orchidales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Pyramidalis",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Common Pyramidal Orchid"    ]},{    "cites_accepted":false,    "class_name":null,   "family_name":"Orchidaceae",    "full_name":"Cephalanthera damasonium",    "genus_name":"Cephalanthera",    "hash_ann_symbol":"#4",    "id":23486,    "kingdom_name":"Plantae",    "order_name":"Orchidales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Damasonium",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[]},{    "cites_accepted":true,    "class_name":null,    "family_name":"Primulaceae",    "full_name":"Cyclamen purpurascens",    "genus_name":"Cyclamen",    "hash_ann_symbol":"#4",    "id":15008,    "kingdom_name":"Plantae",    "order_name":"Primulales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Purpurascens",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Cyclamen Rouge Pourpre"    ]},{    "cites_accepted":true,    "class_name":null,    "family_name":"Euphorbiaceae",    "full_name":"Euphorbia epithymoides",    "genus_name":"Euphorbia",    "hash_ann_symbol":"#4",    "id":22180,    "kingdom_name":"Plantae",    "order_name":"Euphorbiales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Epithymoides",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[]},{    "cites_accepted":true,    "class_name":null,    "family_name":"Euphorbiaceae",    "full_name":"Euphorbia exigua",    "genus_name":"Euphorbia",    "hash_ann_symbol":"#4",    "id":16176,    "kingdom_name":"Plantae",    "order_name":"Euphorbiales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Exigua",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[]},{    "cites_accepted":true,    "class_name":null,    "family_name":"Amaryllidaceae",    "full_name":"Galanthus nivalis",    "genus_name":"Galanthus",    "hash_ann_symbol":"#4",    "id":29101,    "kingdom_name":"Plantae",    "order_name":"Liliales",    "phylum_name":null,    "rank_name":"SPECIES",    "species_name":"Nivalis",    "recently_changed":false,    "current_parties_ids":[],    "current_listing":"II",    "english_names":[      "Common Snowdrop"    ]}]';
var data = JSON.parse(json);

function SpeciesCtrl($scope){
  $scope.species_chosen = new Array();
  $scope.levels = new Array();

  function include(arr, obj) {
    for(var i=0; i<arr.length; i++) {
        if (arr[i] == obj) return true;
        }
    }
  $scope.select = function($name, $level){
    if (include($scope.levels, $name) == true){
      for (var j = 0; j < $scope.species_chosen.length; j++){
        if ($scope.species_chosen[j][$level] == $name){
          $scope.species_chosen.splice(j, 1);
        }
      }
      $scope.levels.splice($scope.levels.indexOf($name),1);
    }
    else{
      for (var i = 0; i < data.length; i++){
        if (data[i][$level] == $name){
            $scope.species_chosen.push(data[i]);
        }
      }
      $scope.levels.push($name);
    }
  };
}